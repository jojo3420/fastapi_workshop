<!DOCTYPE html>
<html>

<head>
    <title>QuizBot</title>
    <link href="style.css" rel="stylesheet">
    <!--    <script src="jwt-decode.js"></script>-->
</head>

<body>
<!--<nav>-->
<!--    <div>-->
<!--        <ul>-->
<!--            <li><img src="#" alt="avatar" id="avatar"></li>-->
<!--            <li id="username"></li>-->
<!--        </ul>-->
<!--    </div>-->
<!--</nav>-->
<main>
    <div class="theme">
        <h1>ðŸ†€ í€´ì¦ˆ ë¬¸ì œ ë§Œë“¤ê¸°</h1>
        <form method="post" action="/v1/quiz/form" id="quiz" enctype="multipart/form-data">
            <input type="text" name="question" placeholder="ë¬¸ì œ" required="required"/>
            <textarea name="examples" placeholder="1ï¸. ë³´ê¸°&#10;2ï¸. ë³´ê¸°&#10;3ï¸. ë³´ê¸°&#10;4ï¸. ë³´ê¸°" rows=6
                      required="required"></textarea>
            <input type="number" name="answer" placeholder="ì •ë‹µ" min="1" required="required"/>
            <button type="submit" class="btn btn-primary btn-block btn-large" onclick="submitData()">ë§Œë“¤ê¸°</button>
        </form>
    </div>
</main>
<script>
    // const btn = document.querySelector('button.btn.btn-primary')
    // btn.addEventListener('click', () => {
    //     const body = {
    //         question: document.querySelector('input[name="question"]').value,
    //         examples: document.querySelector('textarea[name="examples"]').value,
    //         answer: document.querySelector('input[name="answer"]').value,
    //     }
    //     console.log({body})
    // })

    function submitData(question, examples, answer) {
        let form = new FormData(document.getElementById('quiz'));
        // console.log(form)
        fetch('/v1/quiz/form', {
            method: 'POST',
            body: form,
        }).then(response => {
            if (response.ok) {
                alert('ðŸŽ‰ ë¬¸ì œê°€ ì¶”ê°€ë˜ì—ˆìŠµë‹ˆë‹¤!');
                location.reload();
            }
            throw new Error('network error');
        }).catch(error => {
            console.error({error})
            console.error("ðŸ¥µ ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤..")
        });
    }
</script>
</body>

</html>